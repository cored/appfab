-# Pass me an +attachment+
:ruby
  size = 64
  large = 180
  is_image = attachment.mime_type =~ /^image/

  image_small = is_image &&
    attachment.file.thumb("#{size}x#{size}#").jpg.url
  image_large = is_image &&
    attachment.file.thumb("#{large}x#{large}#").jpg.url

  attachment_title = "%s (%s)" % [ attachment.name, number_to_human_size(attachment.size) ]

%div[attachment]
  = link_to attachment.file.url, target:'_blank', style:(image_small && "background-image:url('#{image_small}')"), class: 'thumb', title:attachment_title do
    - if is_image
      &nbsp;
    - else
      %i.icon-file
  .name
    = attachment.name
  = link_to attachment, method: :delete, remote:true do
    %i.icon-trash
